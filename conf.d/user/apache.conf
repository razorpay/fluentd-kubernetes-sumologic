<source>
  @type tail
  format apache_error
  path "/var/log/fluentd/**/apache/*-error.log"
  pos_file /mnt/pos/apache.error_log.pos
  path_key tailed_path
  time_format %Y-%m-%dT%H:%M:%S.%NZ
  tag apache.error.*
  read_from_head "#{ENV['READ_FROM_HEAD']}"
  refresh_interval "#{ENV['REFRESH_INTERVAL']}"
</source>

<source>
  @type tail
  time_format %Y-%m-%dT%H:%M:%S.%NZ
  format apache2
  path "/var/log/fluentd/**/apache/*-access.log"
  pos_file /mnt/pos/apache.access_log.pos
  path_key tailed_path
  tag apache.access.*
  read_from_head "#{ENV['READ_FROM_HEAD']}"
  refresh_interval "#{ENV['REFRESH_INTERVAL']}"
</source>

<filter apache.error.**>
  @type kubernetes_sumologic
  source_category "${tag_parts[5]}/${tag_parts[6]}/apache/error"
  source_name "apache"
  source_category_prefix "#{ENV['SOURCE_CATEGORY_PREFIX']}"
</filter>

<filter apache.access.**>
  @type kubernetes_sumologic
  source_category "${tag_parts[5]}/${tag_parts[6]}/apache/access"
  source_name "apache"
  source_category_prefix "#{ENV['SOURCE_CATEGORY_PREFIX']}"
</filter>