<source>
  @type tail
  format json
  time_key "#{ENV['TIME_KEY']}"
  path "/var/log/fluentd/**/trace/*.log"
  exclude_path "#{ENV['TRACE_EXCLUDE_PATH']}"
  pos_file "#{ENV['TRACE_LOGS_POS_PATH']}"
  tag trace.*
  path_key tailed_path
</source>

<filter trace.**>
  @type kubernetes_sumologic
  source_category "${tag_parts[4]}/${tag_parts[5]}/trace"
  source_name "trace"
  source_category_prefix "#{ENV['SOURCE_CATEGORY_PREFIX']}"
</filter>